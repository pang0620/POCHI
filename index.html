<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POCHI</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
  <h2>ν›„μ›ν•κΈ°</h2>
  <p>μ•„λμ— κΈμ•΅μ„ μ…λ ¥ν•κ³  λ³µμ‚¬ λ²„νΌμ„ λ„λ¥΄μ„Έμ”</p>
  <input type="text" id="amount" placeholder="κΈμ•΅ μ…λ ¥ (μ: 1000)">
  <button onclick="copyToClipboard()">λ³µμ‚¬</button>

  <script>
    // π” μ•”νΈν™”λ κ³„μΆλ²νΈ λ¬Έμμ—΄ (μ: 'μ°λ¦¬ 1002-123-456789')
    const encryptedData = "U2FsdGVkX19rWhGFtTz/0fD9LdRaNH12R56/HFEYdk2TDQz8vw1evRGPekSwl7BS";

    function copyToClipboard() {
      const key = new URLSearchParams(location.search).get("key");
      /*
      if (!key) {
        alert("λ³µνΈν™” ν‚¤κ°€ μ—†μµλ‹λ‹¤.");
        return;
      }
      */

      const decrypted = CryptoJS.AES.decrypt(encryptedData, key).toString(CryptoJS.enc.Utf8);
      const amount = document.getElementById("amount").value.trim();
      const finalText = decrypted + " " + amount + "μ›"; //? `${decrypted} ${amount}μ›` : decrypted;

      navigator.clipboard.writeText(finalText)
        .then(() => alert("ν΄λ¦½λ³΄λ“μ— λ³µμ‚¬λμµλ‹λ‹¤!"))
        .catch(err => alert("λ³µμ‚¬ μ‹¤ν¨: " + err));
    }
  </script>
</body>
</html>
